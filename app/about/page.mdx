import Image from "next/image";
import Link from "next/link";
import BlueSky from "@/components/svg/Bluesky";
import GitHub from "@/components/svg/GitHub";
import LinkedIn from "@/components/svg/LinkedIn";
import YouTube from "@/components/svg/YouTube";
import RaspberryPi from "@/components/svg/RaspberryPi";
import { RotatingGradientBorder } from "@/components/ui/RotatingGradientBorder";

export const metadata = {
  title: "About",
  description: "Learn about Rio, this site, and the Raspberry Pi powering it all.",
};

<article className="prose container mx-auto max-w-2xl px-4 py-12">

<div className="not-prose mb-12 flex flex-col items-center text-center">
  <Image
    src="/myImages/Rio-With-Pups.jpg"
    alt="Rio with dogs"
    width={240}
    height={240}
    className="mb-6 rounded-full shadow-lg"
  />
  <h1 className="text-3xl font-bold tracking-tight">Hey, I'm Rio üëã</h1>
  <div className="mt-2 text-muted-foreground">
    Software developer and dog enthusiast based in Portland, OR.
  </div>
</div>

---

## What is this?

<Image
  src="/myImages/My-Pi.jpeg"
  alt="A Raspberry Pi"
  width={300}
  height={225}
  className="float-right mb-4 ml-6 w-full"
/>

Over the holidays, my sister gifted me a **Raspberry Pi** <RaspberryPi className="inline w-4 -mt-1" />. Thanks, sis! ü´∂

If you‚Äôre unfamiliar, a Raspberry Pi is a credit-card-sized computer. Unlike traditional machines, it doesn‚Äôt include a screen, keyboard, or even a case‚Äîjust the bare essentials. The main selling point of my model? [It has a power button ü§Øü§Øü§Ø](https://www.raspberrypi.com/products/raspberry-pi-5/#:~:text=That%E2%80%99s%20not%20all-,Power%20button,-Dual%204Kp60).

While not built for gaming, Raspberry Pis are fantastic for DIY projects and experimentation. You can create robots, smart home devices‚Äîor even host a website. Which is exactly what I did.

After some late-night coding sessions and hardware tinkering, I launched my first **self-hosted website**.

Naturally, the theme is **dog photos**. Because dogs are awesome. üê∂

<div className="clear-both" />

---

## Inspiration

I‚Äôve always used cloud services like Vercel and Netlify to host my projects. They‚Äôre fast, simple, and take care of a lot behind the scenes.

But for this one, I wanted a challenge‚Äîsomething that would push me to understand self-hosting, fill knowledge gaps, and get hands-on with my new Pi.

In the process, I learned about networking, Linux, process management, Docker, DevOps, security, and more.

---

## The Setup (for beginners)

<Image
  src="/myImages/Tech-For-Dummies.jpg"
  alt="My Raspberry Pi setup"
  width={600}
  height={400}
  className="w-full"
/>

The internet is essentially just computers talking to each other over cables and Wi-Fi.

They send data back and forth using IP addresses, URLs, and something called DNS (Domain Name System)‚Äîoften referred to as the internet‚Äôs "phone book."

For this project, I bought the domain `rioredwards.com` from [Cloudflare](https://www.cloudflare.com/) and created a subdomain, `pi.rioredwards.com`, that points directly to my Raspberry Pi.

In simple terms, there are two kinds of computers online: **clients** and **servers**. Your computer (the client) sends a request to mine (the server). My Pi is running web server software that listens for those requests and responds with code and images. Your browser then renders it into what you see here.

To make this site work, I had to:

- Build the **frontend**‚Äîcode that runs in your browser
- Build the **backend**‚Äîcode that runs on my Pi
- Configure the domain and networking

There‚Äôs more going on behind the scenes‚Äîlike a database, an AI-powered DogBot, and a system profiler‚Äîbut we‚Äôll get into that next.

### Bonus: What makes a computer a server?

Any computer can be a server‚Äîeven yours! All it takes is downloading some free server software.

That said, to make it accessible from the internet, you'd need to configure your router or use a service like Cloudflare Tunnels. Without that, your site wouldn't be reachable outside your local network.

Want a deeper dive? Check out my article: [What is the Backend?](https://medium.com/@rioedwards/what-is-the-backend-ffd808ff950e).

---

## The Setup (for techies)

<Image
  src="/myImages/Tech-Stack.jpg"
  alt="My Raspberry Pi setup"
  width={600}
  height={400}
  className="w-full"
/>

### Tech Stack

| Layer           | Technology                                                                     |
| --------------- | ------------------------------------------------------------------------------ |
| OS              | Raspberry Pi OS (Debian GNU/Linux "trixie")                                    |
| Tunnel          | Cloudflare Tunnels                                                             |
| Web             | Next.js, React, TypeScript, Tailwind, ShadCN, Three.js, MDX, Drizzle, NextAuth |
| Database        | PostgreSQL                                                                     |
| AI Validation   | Python, FastAPI, OpenNSFW, PyTorch                                             |
| System Profiler | Hono, TypeScript, Node.js                                                      |

Was this overengineered? Probably. But my goal was to **learn**, not just ship.

---

### Phase 1

I began with [this tutorial](https://www.youtube.com/watch?v=Vp4glSVPT8o), which got me a basic fullstack Next.js app running on the Pi, with traffic routed through Cloudflare.

Initially, the app used Node.js and the filesystem for storage‚Äîphotos and metadata saved as JSON. I also had a simple UUID tagging system instead of real auth. Functional, but definitely not scalable.

Eventually, work got busy, and the project sat idle for about a year.

Highlights from Phase 1:

- Built a reusable component with
  <RotatingGradientBorder
    backgroundColor="transparent"
    borderRadius="12px"
    containerClassName="mx-1 inline-block align-middle bg-background">
    <span className="px-2 bg-background rounded-full">Glowing Gradient Borders</span>
  </RotatingGradientBorder>
  Might release it as an npm package someday.
- Wrote a Bash script to update the app and restart the server‚Äîmy first step into DevOps.

- Built a browser-based image compression service to convert large files and HEIC images. That alone was a [PAIN](https://caniuse.com/?search=heif) to support.

---

### Phase 2

After a long break, I came back with fresh energy and ideas. First step: upgrade the stack.

- Switched to SQLite and Prisma
- Added NextAuth for authentication
- Identified a few major issues:
  1. Server instability
  2. Clunky deployment
  3. No moderation for uploads

To fix them, I:

1. Replaced `nohup` with **PM2** for process management
2. Set up a **GitHub Actions** workflow for auto-deployments
3. Created **DogBot**, an AI image validator
4. **Dockerized** everything
5. Rebuilt the `/stats` page as a dedicated microservice

#### AI Image Validation (DogBot)

This was surprisingly smooth. I used:

- **OpenNSFW** for detecting inappropriate content
- **PyTorch** model for verifying dog images

The service runs on a **FastAPI** server with one endpoint. It receives an image and returns `isDog` and `isNSFW` booleans. I tested it with existing site images‚Äîeverything passed.

---

### Docker Woes & Wins

Docker was a pain at first. Builds failed constantly. But once I discovered [Lee Rob‚Äôs tutorial](https://www.youtube.com/watch?v=sIVL4JMqRfc), things clicked.

I rebuilt the project using his setup, reintegrating my features one by one. Along the way, I switched:

- Prisma ‚û°Ô∏è Drizzle
- SQLite ‚û°Ô∏è PostgreSQL
- Added **Nginx** for image caching

---

### System Profiler Service

I turned the `/stats` page into a fully-fledged service that monitors the server in real-time.

- Built using **Hono**, **TypeScript**, and **Node.js**
- Uses filesystem APIs (`/proc`, `/sys`) and Docker socket for metrics
- Streams data to the frontend via **Server-Sent Events (SSE)**

There‚Äôs even a mock mode using generator functions and sample data for local development on macOS.

---

## Connecting to the Pi

I connect to the Pi using:

- **SSH**
- **Raspberry Pi Connect**
- A keyboard + mouse + TV (for direct access)

Only one is necessary, but it was fun trying them all.

---

## How It Works

- **Database:** PostgreSQL stores photo metadata. Images live on disk. Schema changes are applied automatically on deployment.
- **AI Validation:** Every photo is checked for NSFW content and to ensure it‚Äôs actually a dog before it's uploaded. Keeps things clean and on-brand.

- **Live Monitoring:** A real-time dashboard displays CPU, memory, network, and container health‚Äîpowered by the system-profiler service and streamed via SSE.

---

## Get in Touch

Got questions, feedback, or just want to connect? Reach out below!

<div className="not-prose mt-6 flex gap-4">
  <Link href="https://www.linkedin.com/in/rio-edwards/" aria-label="LinkedIn">
    <LinkedIn className="w-8 text-foreground/70 transition-colors hover:text-foreground" />
  </Link>
  <Link href="https://bsky.app/profile/rioredwards.bsky.social" aria-label="Bluesky">
    <BlueSky className="w-8 text-foreground/70 transition-colors hover:text-foreground" />
  </Link>
  <Link href="https://www.youtube.com/channel/UCZdVYjS_Os_4e7DZAZSRxBQ" aria-label="YouTube">
    <YouTube className="w-8 text-foreground/70 transition-colors hover:text-foreground" />
  </Link>
  <Link href="https://github.com/rioredwards/" aria-label="GitHub">
    <GitHub className="w-8 text-foreground/70 transition-colors hover:text-foreground" />
  </Link>
</div>

</article>
